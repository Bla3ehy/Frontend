<!doctype html>
<html lang="en">

    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <style>
            body {
                font-family: 'Noto Sans TC', sans-serif;
                ;
            }

            * {
                padding: 0;
                margin: 0;
                list-style: none;
            }
            .row .btn-outline-dark:hover {
                color: unset;
                background-color: unset;
            }

            #productBtnGroup>button {
                margin-left: 10px;
                margin-right: 10px;
            }
        </style>

        <title>app1e</title>
    </head>

    <body>
        <div class="container">
            <div id="productBtnGroup" class="row mb-3 d-flex justify-content-center">
                <button id="iPhone" type="button" class="product-btn btn btn-dark">iPhone</button>
                <button id="iPad" type="button" class="product-btn btn btn-dark">iPad</button>
                <button id="macBook" type="button" class="product-btn btn btn-dark">macBook</button>
            </div>
            <div class="row">
                <div class="col-12 col-md-6">
                    <!-- 商品圖 -->
                    <div id="picture" class="row" style="box-sizing: border-box; "></div>
                </div>
                <div class="col-12 col-md-4">
                    <!-- 顏色區塊 -->
                    <div id="feature_color" class="row d-flex flex-column"></div>
                    <!-- 記憶體大小及價格區塊-->
                    <div id="storage_price" class="row d-flex w-100"></div>

                    <div id="total_price" class="row d-flex"></div>
                </div>
            </div>
        </div>




        <!-- Optional JavaScript -->
        <script>
            var products = {
                iPhone: {
                    big_picture: 'apple_picture/iPhone11_all_pic.png',

                    feature: [
                        { color: '白',colorValue: '#ffffff', img_src:'apple_picture/iPhone-white.png'}, 
                        { color: '紅',colorValue: '#ff0000', img_src:'apple_picture/iPhone11_red.png'},
                        {color: '黑', colorValue: '#000000', img_src: 'apple_picture/iPhone-black.png'}
                    ],

                    spec: [
                        {storage: '64GB',price: 24900}, 
                        {storage: '128GB',price: 26900}, 
                        {storage: '256GB',price: 30400}
                    ]
                },
                iPad:{
                    big_picture:'apple_picture/iPad_all.png',

                    feature:[
                        {color: '白',colorValue: '#ffffff', img_src:'apple_picture/iPad-silver.png'},
                        {color: '玫瑰金',colorValue: '#FFE4E1', img_src:'apple_picture/iPad-gold.png'},
                        {color: '黑',colorValue: '#000000', img_src:'apple_picture/iPad-gray.png'}
                    ],
                    spec:[
                        {storage: '128GB',price: 25900}, 
                        {storage: '256GB',price: 29400}, 
                        {storage: '512GB',price: 36400}, 
                    ]
                },
                    macBook:{
                        big_picture:'apple_picture/mbp13-big-picture.png',
                        feature:[
                            {color: '白',colorValue: '#ffffff', img_src:'apple_picture/mbp13-silver.png'},
                            {color: '灰',colorValue: '#5B5B5B', img_src:'apple_picture/mbp13-gray.png'}
                        ],
                        spec:[
                            {storage: '128GB',price: 42900},
                            {storage: '256GB',price: 48900}
                        ]
                    }
            };
            var pic = document.getElementById('picture');
            var feature_color = document.getElementById('feature_color');
            var storage_price = document.getElementById('storage_price');
            var btn = document.querySelectorAll('.btn');
            var price_span = document.createElement('span');
            btn.forEach((item)=> {
                item.addEventListener('click',function() {
                    pic.innerHTML = '';
                    feature_color.innerHTML = '';
                    storage_price.innerHTML = '';
                    price_span.innerHTML = '';

                    // 大圖
                    var img = document.createElement('img');
                    img.setAttribute('src',products[item.innerText].big_picture);
                    pic.appendChild(img);
                    img.style.width = '80%';
                    
                    // 顏色區塊
                    var h3 = document.createElement('h3');
                    h3.innerText = '顏色';
                    feature_color.appendChild(h3);
                    var btn_color_div = document.createElement('div');
                    for (let item of products[this.innerText].feature) {
                        // var color_btn_div = document.createElement('div');
                        var color_btn = document.createElement('button');
                        var circle_div = document.createElement('div');
                        var span_color = document.createElement('span');

                        //color_btn_div
                        btn_color_div.classList.add('d-flex');
                        btn_color_div.classList.add('flex-nowrap');
                        btn_color_div.style.marginBottom = '100px';
                        
                        
                        //span
                        span_color.innerHTML = '<br>' + item.color;
                        span_color.style.fontSize = '20px';
                        span_color.style.marginTop = '100px'
                        

                        //circle_div(顏色圓形)
                        circle_div.style.backgroundColor = `${item.colorValue}`;
                        circle_div.style.width = '30px';
                        circle_div.style.height = '30px';
                        circle_div.style.borderRadius = '50%';
                        circle_div.classList.add('mx-auto')

                        //color_btn
                        color_btn.style.width = '20%';
                        color_btn.style.height = '120px';
                        color_btn.style.marginRight = '50px'; 
                        color_btn.style.marginTop = '70px';
                        
                        //元素appendChild到各自的父層
                        color_btn.appendChild(circle_div);
                        color_btn.appendChild(span_color);
                        btn_color_div.appendChild(color_btn);
                        feature_color.appendChild(btn_color_div);

                        //生成記憶體＆價格的按鈕
                        color_btn.addEventListener('click',()=>{
                            img.setAttribute('src', item.img_src);
                            storage_price.innerHTML = '';
                            storage_price.style.flexWrap= 'nowrap';
                            storage_price.style.justifyContent= 'space-between';

                            for (let item of products.iPhone.spec) {
                                let storage_btn = document.createElement('button');
                                storage_price.appendChild(storage_btn);
                                storage_btn.innerHTML = item.storage + '<br>' + '$' + item.price;
                                // storage_btn.style.width = '10%';
                                storage_btn.style.height = '120px';
                                storage_btn.style.fontSize = '20px';
                                storage_btn.style.fontWeight = '500';
                                //記憶體＆價格的按鈕
                                storage_btn.addEventListener('click',()=>{
                                    let total_price = document.getElementById('total_price');
                                    price_span.innerHTML = '';
                                    total_price.appendChild(price_span);
                                    price_span.innerHTML = '價格試算:' + '<br>' + 'NT$' + item.price;
                                    price_span.style.fontSize = '25px';
                                    price_span.style.fontWeight = 'bold';
                                }
                                )};
                        })
                    }
            });
        });
        </script>










        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
        </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
        </script>
    </body>

</html>